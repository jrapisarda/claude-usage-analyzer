import{j as e}from"./query-vendor-DAETOSEH.js";import{e as v,L as g}from"./react-vendor-CGr-4ZyM.js";import{u as b,L as _,a as i,f as o}from"./index-DZMFuYgm.js";import{a as S}from"./projects-CXgDD7CH.js";import{P as k}from"./PageLayout-DEtLmFLB.js";import{M as c}from"./MetricCard-BoawkqIY.js";import{C as a}from"./ChartCard-Cn7QorEQ.js";import{E as L}from"./ErrorState-xqkb_4mP.js";import{C as r,T as l}from"./chartConfig-CHOlO3Nn.js";import{A as w}from"./arrow-left-Az4NKZJP.js";import{b as d,A as T,X as x,Y as m,T as n,d as A,P,f as K,C as O,L as f,B as p,e as h}from"./chart-vendor-Df4oWUqu.js";function H(){const{path:y}=v(),{dateRange:N}=b(),{data:t,isLoading:C,error:u}=S(y||"",N);return C?e.jsx(_,{message:"Loading project details..."}):u?e.jsx(L,{message:u.message}):t?e.jsxs("div",{children:[e.jsx("div",{className:"px-6 pt-4",children:e.jsxs(g,{to:"/projects",className:"inline-flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(w,{className:"h-3 w-3"})," Back to Projects"]})}),e.jsxs(k,{title:t.project_display,subtitle:`${o(t.total_sessions)} sessions | ${i(t.total_cost)} total cost | ${o(t.total_loc)} LOC`,children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 mb-6",children:[e.jsx(c,{title:"Total Cost",value:i(t.total_cost)}),e.jsx(c,{title:"Sessions",value:o(t.total_sessions)}),e.jsx(c,{title:"Lines of Code",value:o(t.total_loc)})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[e.jsx(a,{title:"Cost Trend",children:t.cost_trend.length>0?e.jsx("div",{className:"h-64",children:e.jsx(d,{width:"100%",height:"100%",children:e.jsxs(T,{data:t.cost_trend,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"projCostGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:r[0],stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:r[0],stopOpacity:0})]})}),e.jsx(x,{dataKey:"date",tick:{fontSize:11},tickFormatter:s=>s.slice(5),stroke:"var(--color-muted-foreground)"}),e.jsx(m,{tick:{fontSize:11},tickFormatter:s=>`$${s.toFixed(2)}`,stroke:"var(--color-muted-foreground)",width:50}),e.jsx(n,{contentStyle:l,formatter:s=>[s!=null?i(s):"","Cost"]}),e.jsx(A,{type:"monotone",dataKey:"cost",stroke:r[0],fill:"url(#projCostGrad)",strokeWidth:2})]})})}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No cost data"})}),e.jsx(a,{title:"Languages",children:t.languages.length>0?e.jsx("div",{className:"h-64",children:e.jsx(d,{width:"100%",height:"100%",children:e.jsxs(P,{children:[e.jsx(K,{data:t.languages,dataKey:"loc_written",nameKey:"language",innerRadius:50,outerRadius:80,paddingAngle:2,label:({name:s})=>s??"",children:t.languages.map((s,j)=>e.jsx(O,{fill:r[j%r.length]},j))}),e.jsx(n,{contentStyle:l}),e.jsx(f,{})]})})}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No language data"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[e.jsx(a,{title:"Top Tools",children:t.tools.length>0?e.jsx("div",{className:"h-64",children:e.jsx(d,{width:"100%",height:"100%",children:e.jsxs(p,{data:t.tools.slice(0,10),layout:"vertical",margin:{left:60},children:[e.jsx(x,{type:"number",tick:{fontSize:11},stroke:"var(--color-muted-foreground)"}),e.jsx(m,{type:"category",dataKey:"tool_name",tick:{fontSize:10},width:55,stroke:"var(--color-muted-foreground)"}),e.jsx(n,{contentStyle:l}),e.jsx(h,{dataKey:"count",fill:r[1],name:"Calls",radius:[0,4,4,0]})]})})}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No tool data"})}),e.jsx(a,{title:"Branches",children:t.branches.length>0?e.jsx("div",{className:"h-64",children:e.jsx(d,{width:"100%",height:"100%",children:e.jsxs(p,{data:t.branches,children:[e.jsx(x,{dataKey:"branch",tick:{fontSize:9},interval:0,angle:-20,textAnchor:"end",height:50,stroke:"var(--color-muted-foreground)"}),e.jsx(m,{tick:{fontSize:11},stroke:"var(--color-muted-foreground)"}),e.jsx(n,{contentStyle:l}),e.jsx(h,{dataKey:"sessions",fill:r[2],name:"Sessions",radius:[4,4,0,0]}),e.jsx(h,{dataKey:"cost",fill:r[3],name:"Cost",radius:[4,4,0,0]}),e.jsx(f,{})]})})}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No branch data"})})]}),e.jsx(a,{title:"Sessions",subtitle:`${t.sessions.length} most recent`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("th",{className:"text-left px-3 py-2 font-medium text-muted-foreground",children:"Session"}),e.jsx("th",{className:"text-left px-3 py-2 font-medium text-muted-foreground",children:"Started"}),e.jsx("th",{className:"text-right px-3 py-2 font-medium text-muted-foreground",children:"Cost"}),e.jsx("th",{className:"text-right px-3 py-2 font-medium text-muted-foreground",children:"Turns"}),e.jsx("th",{className:"text-right px-3 py-2 font-medium text-muted-foreground",children:"LOC"}),e.jsx("th",{className:"text-left px-3 py-2 font-medium text-muted-foreground",children:"Model"})]})}),e.jsx("tbody",{children:t.sessions.map(s=>e.jsxs("tr",{className:"border-b border-border hover:bg-accent/10",children:[e.jsx("td",{className:"px-3 py-2",children:e.jsxs(g,{to:`/sessions/${s.session_id}`,className:"font-mono text-primary hover:underline",children:[s.session_id.slice(0,8),"..."]})}),e.jsx("td",{className:"px-3 py-2 text-muted-foreground",children:s.start_time?.slice(0,16)||"N/A"}),e.jsx("td",{className:"px-3 py-2 text-right font-mono",children:i(s.total_cost)}),e.jsx("td",{className:"px-3 py-2 text-right",children:s.turn_count}),e.jsx("td",{className:"px-3 py-2 text-right",children:o(s.loc_written)}),e.jsx("td",{className:"px-3 py-2 text-muted-foreground",children:s.model_default})]},s.session_id))})]})})})]})]}):null}export{H as default};
