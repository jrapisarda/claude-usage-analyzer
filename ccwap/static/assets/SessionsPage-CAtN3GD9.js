import{j as s}from"./query-vendor-ChV-W4bE.js";import{u,r as l,L as g}from"./react-vendor-yhu9f3WU.js";import{P as j}from"./PageLayout-D9m6_tUv.js";import{D as f}from"./DataTable-DaAT2w4Q.js";import{E as _}from"./ErrorState-BLJWzcFK.js";import{E as N}from"./ExportDropdown-B5mNqhEJ.js";import{B as v}from"./badge-35HJNii9.js";import{u as y,a as b,c as P,f as m}from"./index-fSpeN2Hc.js";import{u as w}from"./sessions-CckKvtNC.js";import"./table-ClnvA-zJ.js";import"./skeleton-D4mSERnM.js";import"./chart-vendor-CnSh9PGG.js";import"./index-CAqHlzL7.js";import"./index-BPwOh6t0.js";import"./check-C4JeTEY1.js";import"./download-CBeYuC7_.js";const D=[{id:"session",header:"Session",cell:({row:e})=>{const t=e.original;return s.jsxs("div",{children:[s.jsxs(g,{to:`/sessions/${t.session_id}`,className:"text-primary hover:underline font-mono text-xs",onClick:o=>o.stopPropagation(),children:[t.session_id.slice(0,12),"..."]}),s.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:t.first_timestamp?new Date(t.first_timestamp).toLocaleString():"N/A"}),s.jsx("div",{className:"flex gap-1 mt-0.5",children:t.is_agent&&s.jsx(v,{variant:"secondary",className:"bg-purple-500/20 text-purple-400 text-[10px] px-1 py-0.5",children:"agent"})})]})}},{accessorKey:"project_display",header:"Project",cell:({row:e})=>{const t=e.original;return s.jsx("span",{className:"truncate block max-w-[200px]",children:t.project_display||t.project_path})}},{accessorKey:"cost",header:()=>s.jsx("div",{className:"text-right",children:"Cost"}),cell:({getValue:e})=>s.jsx("div",{className:"text-right font-mono whitespace-nowrap",children:b(e())})},{accessorKey:"duration_seconds",header:()=>s.jsx("div",{className:"text-right",children:"Duration"}),cell:({getValue:e})=>s.jsx("div",{className:"text-right font-mono whitespace-nowrap",children:P(e())})},{accessorKey:"turns",header:()=>s.jsx("div",{className:"text-right",children:"Turns"}),cell:({row:e})=>{const t=e.original;return s.jsxs("div",{className:"text-right font-mono",children:[m(t.turns),s.jsxs("span",{className:"text-muted-foreground text-xs ml-1",title:"user turns",children:["(",t.user_turns," user)"]})]})}},{accessorKey:"tool_calls",header:()=>s.jsx("div",{className:"text-right",children:"Tools"}),cell:({getValue:e})=>s.jsx("div",{className:"text-right font-mono",children:m(e())})},{accessorKey:"errors",header:()=>s.jsx("div",{className:"text-right",children:"Errors"}),cell:({getValue:e})=>{const t=e();return s.jsx("div",{className:"text-right font-mono",children:s.jsx("span",{className:t>0?"text-amber-400":"",children:t})})}},{accessorKey:"model",header:"Model",cell:({getValue:e})=>s.jsx("span",{className:"font-mono text-xs truncate block max-w-[120px]",children:e()||"N/A"})},{accessorKey:"git_branch",header:"Branch",cell:({getValue:e})=>s.jsx("span",{className:"font-mono text-xs truncate block max-w-[120px]",children:e()||""})}];function G(){const[e]=u(),t=e.get("project")||void 0,{dateRange:o}=y(),[i,d]=l.useState(1),{data:r,isLoading:p,error:c}=w(o,t,i),x=l.useCallback(a=>{d(a+1)},[]),n=t?.replace(/^.*--/,"").replace(/-/g,"/")||null,h=t?[{label:"Projects",href:"/projects"},{label:n||"Project"}]:void 0;return c?s.jsx(_,{message:c.message}):s.jsx(j,{title:"Sessions",subtitle:n?`Filtered by ${n}`:"All sessions",breadcrumbs:h,actions:r?.sessions&&s.jsx(N,{page:"sessions",getData:()=>(r?.sessions||[]).map(a=>({session_id:a.session_id,project:a.project_display||a.project_path,timestamp:a.first_timestamp||"",duration:a.duration_seconds,cost:a.cost,turns:a.turns,tool_calls:a.tool_calls,errors:a.errors,model:a.model||"",branch:a.git_branch||""})),columns:["session_id","project","timestamp","duration","cost","turns","tool_calls","errors","model","branch"]}),children:s.jsx(f,{columns:D,data:r?.sessions??[],isLoading:p,emptyMessage:"No sessions found",pagination:r?{pageIndex:i-1,pageSize:r.pagination.limit,pageCount:r.pagination.total_pages,totalRows:r.pagination.total_count,onPageChange:x}:void 0})})}export{G as default};
