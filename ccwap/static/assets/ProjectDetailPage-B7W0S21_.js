import{j as s}from"./query-vendor-ChV-W4bE.js";import{f as k,L as S}from"./react-vendor-yhu9f3WU.js";import{u as v,a as c,f as r}from"./index-DJRpnyjL.js";import{a as K}from"./projects-RG9_2xvp.js";import{P as p}from"./PageLayout-DfUqXGNp.js";import{M as f,a as d}from"./MetricCardGrid-DsyWLa6x.js";import{C as l}from"./ChartContainer-LUT-0W_K.js";import{D as L}from"./DataTable--0w-l0AJ.js";import{E as T}from"./ErrorState-Cnbe0SU1.js";import{S as y}from"./skeleton-DoFMmdLy.js";import{C as o,T as i}from"./chartConfig-C_qPkli-.js";import{A as P,X as m,Y as g,T as n,b as A,P as M,f as E,C as O,L as b,B as C,e as x}from"./chart-vendor-Dwd1Lo9s.js";import"./table-BOi6on67.js";const R=[{accessorKey:"session_id",header:"Session",cell:({row:t})=>s.jsxs(S,{to:`/sessions/${t.original.session_id}`,className:"font-mono text-primary hover:underline",children:[t.original.session_id.slice(0,8),"..."]})},{accessorKey:"start_time",header:"Started",cell:({row:t})=>s.jsx("span",{className:"text-muted-foreground",children:t.original.start_time?.slice(0,16)||"N/A"})},{accessorKey:"total_cost",header:()=>s.jsx("span",{className:"text-right block",children:"Cost"}),cell:({row:t})=>s.jsx("span",{className:"font-mono text-right block",children:c(t.original.total_cost)})},{accessorKey:"turn_count",header:()=>s.jsx("span",{className:"text-right block",children:"Turns"}),cell:({row:t})=>s.jsx("span",{className:"text-right block",children:t.original.turn_count})},{accessorKey:"loc_written",header:()=>s.jsx("span",{className:"text-right block",children:"LOC"}),cell:({row:t})=>s.jsx("span",{className:"text-right block",children:r(t.original.loc_written)})},{accessorKey:"model_default",header:"Model",cell:({row:t})=>s.jsx("span",{className:"text-muted-foreground",children:t.original.model_default})}];function J(){const{path:t}=k(),{dateRange:_}=v(),{data:e,isLoading:N,error:h}=K(t||"",_),u=e?.project_display??t??"";return N?s.jsxs(p,{title:"...",breadcrumbs:[{label:"Projects",href:"/projects"},{label:"..."}],children:[s.jsx(f,{skeleton:!0,count:3,className:"grid-cols-2 sm:grid-cols-3 mb-6"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[s.jsx(y,{className:"h-72 w-full"}),s.jsx(y,{className:"h-72 w-full"})]})]}):h?s.jsx(T,{message:h.message}):e?s.jsxs(p,{title:u,subtitle:`${r(e.total_sessions)} sessions | ${c(e.total_cost)} total cost | ${r(e.total_loc)} LOC`,breadcrumbs:[{label:"Projects",href:"/projects"},{label:u}],children:[s.jsxs(f,{className:"grid-cols-2 sm:grid-cols-3 mb-6",children:[s.jsx(d,{title:"Total Cost",value:c(e.total_cost)}),s.jsx(d,{title:"Sessions",value:r(e.total_sessions)}),s.jsx(d,{title:"Lines of Code",value:r(e.total_loc)})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[s.jsx(l,{title:"Cost Trend",height:256,isEmpty:e.cost_trend.length===0,emptyMessage:"No cost data",children:s.jsxs(P,{data:e.cost_trend,children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"projCostGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:o[0],stopOpacity:.3}),s.jsx("stop",{offset:"95%",stopColor:o[0],stopOpacity:0})]})}),s.jsx(m,{dataKey:"date",tick:{fontSize:11},tickFormatter:a=>a.slice(5),stroke:"var(--color-muted-foreground)"}),s.jsx(g,{tick:{fontSize:11},tickFormatter:a=>`$${a.toFixed(2)}`,stroke:"var(--color-muted-foreground)",width:50}),s.jsx(n,{contentStyle:i,formatter:a=>[a!=null?c(a):"","Cost"]}),s.jsx(A,{type:"monotone",dataKey:"cost",stroke:o[0],fill:"url(#projCostGrad)",strokeWidth:2})]})}),s.jsx(l,{title:"Languages",height:256,isEmpty:e.languages.length===0,emptyMessage:"No language data",children:s.jsxs(M,{children:[s.jsx(E,{data:e.languages,dataKey:"loc_written",nameKey:"language",innerRadius:50,outerRadius:80,paddingAngle:2,label:({name:a})=>a??"",children:e.languages.map((a,j)=>s.jsx(O,{fill:o[j%o.length]},j))}),s.jsx(n,{contentStyle:i}),s.jsx(b,{})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[s.jsx(l,{title:"Top Tools",height:256,isEmpty:e.tools.length===0,emptyMessage:"No tool data",children:s.jsxs(C,{data:e.tools.slice(0,10),layout:"vertical",margin:{left:60},children:[s.jsx(m,{type:"number",tick:{fontSize:11},stroke:"var(--color-muted-foreground)"}),s.jsx(g,{type:"category",dataKey:"tool_name",tick:{fontSize:10},width:55,stroke:"var(--color-muted-foreground)"}),s.jsx(n,{contentStyle:i}),s.jsx(x,{dataKey:"count",fill:o[1],name:"Calls",radius:[0,4,4,0]})]})}),s.jsx(l,{title:"Branches",height:256,isEmpty:e.branches.length===0,emptyMessage:"No branch data",children:s.jsxs(C,{data:e.branches,children:[s.jsx(m,{dataKey:"branch",tick:{fontSize:9},interval:0,angle:-20,textAnchor:"end",height:50,stroke:"var(--color-muted-foreground)"}),s.jsx(g,{tick:{fontSize:11},stroke:"var(--color-muted-foreground)"}),s.jsx(n,{contentStyle:i}),s.jsx(x,{dataKey:"sessions",fill:o[2],name:"Sessions",radius:[4,4,0,0]}),s.jsx(x,{dataKey:"cost",fill:o[3],name:"Cost",radius:[4,4,0,0]}),s.jsx(b,{})]})})]}),s.jsxs("div",{className:"rounded-lg border border-border bg-card p-4",children:[s.jsxs("h3",{className:"text-sm font-medium text-muted-foreground mb-4",children:["Sessions ",s.jsxs("span",{className:"text-xs",children:["(",e.sessions.length," most recent)"]})]}),s.jsx(L,{columns:R,data:e.sessions,emptyMessage:"No sessions found"})]})]}):null}export{J as default};
