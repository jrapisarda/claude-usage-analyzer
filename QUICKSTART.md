# CCWAP Quick Start Guide

Get up and running with CCWAP in 5 minutes.

## Prerequisites

- Python 3.10 or higher
- Claude Code installed and used at least once

## Installation

1. Clone or download this repository:

```bash
cd ~/Downloads
git clone <repository-url>
cd claude-usage-analyzer
```

2. Verify Python version:

```bash
python --version
# Should show Python 3.10.0 or higher
```

3. Run CCWAP for the first time:

```bash
python -m ccwap
```

This will:
- Create the database at `~/.ccwap/analytics.db`
- Scan `~/.claude/projects/` for JSONL files
- Parse and load all session data
- Display a summary report

## First Steps

### View Your Usage Summary

```bash
python -m ccwap
```

Output shows:
- All-time totals (sessions, tokens, cost)
- Today's activity
- Cost breakdown by model
- Top projects by cost

### Check Today's Activity

```bash
python -m ccwap --today
```

### See Daily Breakdown

```bash
python -m ccwap --daily
```

Shows rolling 30-day view with:
- Sessions per day
- Tokens consumed
- Cost per day
- Week-over-week deltas

### Analyze Projects

```bash
python -m ccwap --projects
```

Shows comprehensive metrics for each project:
- Sessions, turns, messages
- LOC written
- Tokens and cost
- Error rates
- Cache hit rates

## Common Tasks

### Track This Week's Spending

```bash
python -m ccwap --this-week --daily
```

### Compare This Month vs Last Month

```bash
python -m ccwap --compare last-month
```

### Find Most Expensive Projects

```bash
python -m ccwap --projects --sort cost
```

### Check Error Rates

```bash
python -m ccwap --errors --this-week
```

### See Tool Usage

```bash
python -m ccwap --tools
```

### Analyze Languages

```bash
python -m ccwap --languages
```

## Understanding the Output

### Cost Calculations

CCWAP uses accurate per-model, per-token-type pricing:

- **Input tokens**: Fresh tokens sent to the API
- **Output tokens**: Tokens generated by the model
- **Cache read tokens**: Tokens read from cache (90% cheaper)
- **Cache write tokens**: Tokens written to cache (25% surcharge)

Example for Sonnet 4.5:
```
10,000 input tokens × $3.00/M = $0.03
5,000 output tokens × $15.00/M = $0.075
20,000 cache read × $0.30/M = $0.006
Total: $0.111
```

### Project Metrics

- **LOC Written**: Total lines of code generated (Write tool)
- **LOC Delivered**: Net LOC after edits (adds - deletes)
- **Error Rate**: Failed tool calls / total tool calls
- **Cache Hit Rate**: Cache reads / (input + cache reads)
- **Cost/KLOC**: Cost per 1000 lines of code

### Date Filters

- `--today`: Current day only
- `--yesterday`: Previous day
- `--this-week`: Monday of current week to today
- `--last-week`: Previous full week (Mon-Sun)
- `--this-month`: First of month to today
- `--last-month`: Previous full month
- `--from DATE --to DATE`: Custom range (YYYY-MM-DD)

## Creating Your First Experiment

Track the impact of a workflow change:

```bash
# Tag sessions before the change
python -m ccwap --tag baseline --from 2026-01-15 --to 2026-01-21

# Tag sessions after the change
python -m ccwap --tag experiment --from 2026-01-22 --to 2026-01-28

# Compare the two
python -m ccwap --compare-tags baseline experiment
```

## Setting Up Aliases

### Bash/Zsh

Add to `~/.bashrc` or `~/.zshrc`:

```bash
# Option 1: Direct path (works from anywhere)
alias ccwap="python /path/to/claude-usage-analyzer/ccwap/ccwap.py"

# Option 2: Module style (requires being in project dir or PYTHONPATH)
# alias ccwap="python -m ccwap"

# Convenience aliases
alias ccwap-today="ccwap --today --daily"
alias ccwap-projects="ccwap --projects --this-month"
alias ccwap-errors="ccwap --errors --this-week"
```

Replace `/path/to/claude-usage-analyzer` with your actual installation path.

Then reload:
```bash
source ~/.bashrc
```

### PowerShell

Add to your PowerShell profile (`$PROFILE`):

```powershell
# Option 1: Direct path (works from anywhere)
function ccwap { python C:\path\to\claude-usage-analyzer\ccwap\ccwap.py @args }

# Convenience functions
function ccwap-today { ccwap --today --daily }
function ccwap-projects { ccwap --projects --this-month }
```

Replace `C:\path\to\claude-usage-analyzer` with your actual installation path.

## Configuring CCWAP

Edit `~/.ccwap/config.json` to customize:

### Update Pricing

```json
{
  "pricing": {
    "claude-opus-4-5-20251101": {
      "input": 15.00,
      "output": 75.00,
      "cache_read": 1.50,
      "cache_write": 18.75
    }
  }
}
```

### Set Budget Alerts

```json
{
  "budget_alerts": {
    "daily_warning": 10.00,
    "weekly_warning": 50.00,
    "monthly_warning": 200.00
  }
}
```

### Customize Display

```json
{
  "display": {
    "color_enabled": true,
    "progress_threshold_mb": 10,
    "table_max_width": 120
  }
}
```

## Preventing Data Loss

By default, Claude Code deletes JSONL files after 30 days. To preserve your data:

1. Edit `~/.claude/settings.json`
2. Add or update:
   ```json
   {
     "cleanupPeriodDays": 99999
   }
   ```
3. Restart Claude Code

CCWAP will warn you if this setting is too low.

## Troubleshooting

### "Database not found" Error

Run without flags first:
```bash
python -m ccwap
```

This initializes the database.

### "No JSONL files found"

Check that:
1. Claude Code has been run at least once
2. `~/.claude/projects/` directory exists
3. JSONL files are present in project directories

### Incorrect Costs

Force recalculation:
```bash
python -m ccwap --rebuild
```

### Slow Performance

For large databases, use date filters:
```bash
python -m ccwap --projects --this-month
```

## Next Steps

- Read the [full README](README.md) for all features
- Check [ARCHITECTURE.md](ARCHITECTURE.md) for technical details
- Explore all report types: `python -m ccwap --help`
- Set up daily/weekly monitoring with cron/Task Scheduler

## Getting Help

- Check the [FAQ in README.md](README.md#faq)
- Review [troubleshooting guide](ARCHITECTURE.md#troubleshooting-guide)
- Open an issue on GitHub

## Example Workflow

Here's a typical daily workflow:

```bash
# Morning: Check yesterday's activity
python -m ccwap --yesterday --daily

# Mid-day: Check current spending
python -m ccwap --today

# End of week: Review weekly totals
python -m ccwap --weekly

# End of month: Generate project report
python -m ccwap --projects --this-month --export monthly-report.csv
```

---

Ready to dive deeper? Check out the [full README](README.md) for advanced features like trend analysis, forecasting, and snapshot comparisons.
